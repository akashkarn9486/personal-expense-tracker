<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Daily Expense Tracker</title>
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Link to external CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body data-theme="light">
  <header>
    <div class="brand">
      <div class="logo">ET</div>
      <div>
        <div style="font-weight:700">Daily Expense Tracker</div>
        <div class="muted" style="font-size:13px">Track, analyze & export your expenses — local-only, private</div>
      </div>
    </div>
    <div class="topbar">
      <div class="muted hide-mobile">View month:</div>
      <select id="monthView" class="small"></select>
      <button id="toggle-theme" class="ghost small">Dark</button>
      <button id="reset-data" class="ghost small">Reset</button>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <!-- main column -->
      <div>
        <div class="card" id="entry-card">
          <form id="expense-form">
            <div style="display:flex;gap:.75rem;align-items:flex-end">
              <div style="flex:1">
                <label for="desc">Description</label>
                <input id="desc" placeholder="Lunch, taxi, groceries..." required />
              </div>
              <div style="width:140px">
                <label for="amount">Amount</label>
                <input id="amount" type="number" step="0.01" placeholder="0.00" required />
              </div>
              <div style="width:160px">
                <label for="date">Date</label>
                <input id="date" type="date" required />
              </div>
            </div>

            <div class="row" style="margin-top:.6rem">
              <div style="flex:1">
                <label for="category">Category</label>
                <select id="category">
                  <option value="Food">Food</option>
                  <option value="Transport">Transport</option>
                  <option value="Groceries">Groceries</option>
                  <option value="Bills">Bills</option>
                  <option value="Entertainment">Entertainment</option>
                  <option value="Health">Health</option>
                  <option value="Other">Other</option>
                </select>
              </div>
              <div style="width:140px">
                <label for="payment">Payment</label>
                <select id="payment">
                  <option>Cash</option>
                  <option>Card</option>
                  <option>UPI</option>
                  <option>Netbanking</option>
                </select>
              </div>
              <div style="width:120px">
                <label>&nbsp;</label>
                <button id="add-expense" class="small">Add</button>
              </div>
            </div>

            <div style="display:flex;gap:.5rem;align-items:center;margin-top:.6rem">
              <label style="margin:0">Repeat:</label>
              <select id="repeat">
                <option value="none">None</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="monthly">Monthly</option>
              </select>
              <input id="tag" placeholder="Tag (optional)" />
              <div class="muted footer-note">Tip: Use tags for projects or shared expenses</div>
            </div>
          </form>
        </div>

        <div class="card" style="margin-top:1rem">
          <div class="totals">
            <div>
              <div class="muted">This month</div>
              <div style="font-size:20px;font-weight:700">₹ <span id="month-total">0.00</span></div>
              <div class="muted">Transactions: <span id="month-count">0</span></div>
            </div>
            <div style="text-align:right">
              <div class="muted">Budget</div>
              <div style="display:flex;gap:.5rem;align-items:center;justify-content:flex-end">
                <input id="budget" style="width:120px" placeholder="0.00" />
                <button id="set-budget" class="small">Set</button>
              </div>
              <div class="muted">Remaining: <span id="budget-remaining">-</span></div>
            </div>
          </div>

          <div style="display:flex;gap:.5rem;align-items:center;margin-top:.8rem">
            <input id="search" class="search" placeholder="Search description, tag, amount..." />
            <select id="filter-cat">
              <option value="all">All categories</option>
            </select>
            <select id="sort-by">
              <option value="date_desc">Newest</option>
              <option value="date_asc">Oldest</option>
              <option value="amount_desc">Amount High</option>
              <option value="amount_asc">Amount Low</option>
            </select>
            <button id="export-csv" class="ghost small">Export CSV</button>
            <input id="import-file" type="file" accept="text/csv" style="display:none" />
            <button id="import-csv" class="ghost small">Import</button>
          </div>

          <div class="list" style="margin-top:.75rem">
            <table id="tx-table">
              <thead>
                <tr><th>Date</th><th>Desc</th><th>Cat</th><th>Tag</th><th>Amt</th><th></th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <div class="card" style="margin-top:1rem">
          <div style="display:flex;gap:1rem;align-items:center">
            <div style="flex:1">
              <div class="muted">Spending by category</div>
              <div class="chart-wrap"><canvas id="catChart"></canvas></div>
            </div>
            <div style="width:320px">
              <div class="muted">Last 14 days</div>
              <div class="chart-wrap"><canvas id="trendChart"></canvas></div>
            </div>
          </div>
        </div>
      </div>

      <!-- right column -->
      <div>
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="muted">Quick add</div>
              <div style="font-weight:700">Fast inputs</div>
            </div>
            <div class="muted">Shortcuts</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:.5rem;margin-top:.8rem">
            <button class="small" data-quick='{"desc":"Breakfast","amount":30,"category":"Food"}'>Breakfast ₹40</button>
            <button class="small" data-quick='{"desc":"Lunch","amount":120,"category":"Food"}'>Lunch ₹120</button>
            <button class="small" data-quick='{"desc":"Taxi","amount":60,"category":"Transport"}'>Taxi ₹60</button>
            <button class="small" data-quick='{"desc":"Groceries","amount":450,"category":"Groceries"}'>Groceries ₹450</button>
          </div>
        </div>

        <div class="card" style="margin-top:1rem">
          <div class="muted">Stats</div>
          <div style="display:flex;flex-direction:column;gap:.5rem;margin-top:.6rem">
            <div class="muted">Biggest expense</div>
            <div id="big-expense">-</div>
            <div class="muted" style="margin-top:.6rem">Most used tag</div>
            <div id="top-tag">-</div>
            <div class="muted" style="margin-top:.6rem">Avg daily spend (this month)</div>
            <div id="avg-daily">-</div>
          </div>
        </div>

        <div class="card" style="margin-top:1rem">
          <div class="muted">Data management</div>
          <div style="display:flex;flex-direction:column;gap:.5rem;margin-top:.6rem">
            <button id="download-json" class="small">Download JSON Backup</button>
            <button id="upload-json" class="small ghost">Restore JSON</button>
            <input id="json-file" type="file" accept="application/json" style="display:none" />
            <div class="footer-note">All data is stored locally in your browser (localStorage). Export to backup before clearing storage.</div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Link to external JavaScript -->
  <script src="script.js"></script>
</body>
</html>